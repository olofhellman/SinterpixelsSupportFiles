#### previous topic: [Layers](SinterpixelsLayers.md)   next topic: [Scripting In Depth A: Script Editor](ScriptEditor.md)


## Movies

Sinterapt supports exporting a sequence of images taken from a graphics window as a QuickTime movie -- the .mov format

This is accomplished using the scripting interface.  There are three basic commands.

To start filming a movie, tell the document to "start filming"

To record a frame of the movie, tell the document to "record movie frame"

To stop filming a movie, tell the document to "stop filming"

To make the movie interesting, some action can take place between each frame.  Here's a script that grows a circle a bit and creates a new tiny circle for every frame

```
tell application "System Events"
	set thepath to get path to documents folder
end tell
tell application "SinterPixels"
	tell document 1
		make new circle with properties {radius:5}
		set radius of circle 1 to 6
		set x coordinate of circle 1 to -50
		start filming
		repeat 100 times
			record movie frame
			set {oldr, oldx} to get {radius, x coordinate} of circle 1
			set radius of circle 1 to (oldr + 1)
			set x coordinate of circle 1 to (oldx + 1)
			make new circle with properties {radius:5}
		end repeat
		stop filming saving in POSIX file thepath
	end tell
end tell

```

You'll notice a few interesting things about this script:

### The location of the saved file

when we issue the "stop filming" command, we also supply a parameter for "saving in" so as to tell the app where the completed movie should be saved.  In this case, we want the file saved in the documents folder.

To get the path to the documents folder, the script uses another application, "System Events" which knows about such things.

However, if this script is run, the file may not actually be saved in the Documents folder, because of the file permissions protections of macOS.  If the "app sandbox" is enabled, the app doesn't actually have permissions to write to your Documents folder, so Sinterpixels will put up a Save Panel to get your permission to save it"

![image](images/growingCircleMovie.mov "The movie generated by the script")


When filming a sequence, it is sometimes useful to pause for a bit to let the app catch up before proceeding.  In this case, some drawing commands can be done asynchronously, so that the app can continue working while a drawing operation is in progress.  Without the delay, it is possible the app will already be trying to apply the next rotation before the previous one is finished, and in this case, it is uncertain which view will be captured when a movie frame is recorded. 

Known issues:
A) The app will crash if the script is run a second time -- i.e. when trying to save a second movie.  I hope to fix this one soon.

#### previous topic: [Layers](SinterpixelsLayers.md)   next topic: [Scripting In Depth A: Script Editor](ScriptEditor.md)
